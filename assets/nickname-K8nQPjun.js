import{_ as u,r as d,l as p,q as e,s as m,X as v,Z as _,u as k,p as h}from"./index-TXDMpLHT.js";const f={class:"container"},w={class:"content"},b={class:"input-container"},y={class:"input-wrapper"},S={__name:"nickname",setup(g){const o=k(),t=d(""),l=()=>{o.back()},r=async()=>{if(!t.value.trim()){alert("请输入昵称");return}const n=localStorage.getItem("user");if(!n){alert("请先登录");return}const s=JSON.parse(n),a=s.user_id;try{const i=await(await fetch("https://192.168.0.122/silver/user/user_update_nickname.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`user_id=${encodeURIComponent(a)}&nickname=${encodeURIComponent(t.value)}`})).json();i.success?(s.nickname=t.value,localStorage.setItem("user",JSON.stringify(s)),alert("昵称修改成功"),o.push("/account")):alert("修改失败："+i.message)}catch(c){console.error("请求错误",c),alert("网络错误，请稍后重试")}};return(n,s)=>(h(),p("div",f,[e("div",{class:"header"},[e("div",{class:"back-arrow",onClick:l},"‹"),s[1]||(s[1]=e("div",{class:"header-title"},"Nickname",-1))]),e("div",w,[e("div",b,[e("div",y,[s[2]||(s[2]=e("div",{class:"input-icon"},[e("div",{class:"user-icon"})],-1)),m(e("input",{type:"text",class:"nickname-input",placeholder:"Please enter your nickname","onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),onKeypress:_(r,["enter"])},null,544),[[v,t.value]])])])]),e("div",{class:"submit-wrapper"},[e("button",{class:"submit-button",onClick:r},"Submit")])]))}},I=u(S,[["__scopeId","data-v-82ec878d"]]);export{I as default};
