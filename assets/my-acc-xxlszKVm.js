import{_ as y,r as u,a as h,b as f,o as b,u as k,l as _,q as e,x as g,s as o,X as i,p as S}from"./index-TXDMpLHT.js";const w={class:"container"},x={class:"content"},N={class:"username-section"},U={class:"username-value"},I={class:"form-group"},P={class:"input-container"},V={class:"form-group"},B={class:"input-container"},O={class:"form-group"},A={class:"input-container"},C={class:"form-group"},D={class:"input-container"},J={class:"phone-container"},M={class:"phone-number"},T=["placeholder"],E={__name:"my-acc",setup(F){const l=k(),p=u(null),r=u(""),s=h({nickname:"",date:"",email:"",fullName:"",phone:""}),d=f(()=>s.phone?s.phone.slice(0,5)+"****":""),c=()=>{l.back()},m=async()=>{console.log("Form submitted",{username:r.value,...s});try{const a=new URLSearchParams;a.append("user_id",p.value),a.append("nickname",s.nickname),s.email&&a.append("email",s.email),s.phone&&a.append("phone",s.phone),s.birthday&&a.append("date",s.birthday);const t=await(await fetch("https://192.168.0.122/silver/user/user_update_nickname.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()})).json();if(!t.success){alert("修改失败："+t.message);return}const v=JSON.parse(localStorage.getItem("user"))||{};localStorage.setItem("user",JSON.stringify({...v,nickname:s.nickname,email:s.email,phone:s.phone,date:s.birthday})),alert("资料修改成功"),l.push("/")}catch(a){console.error(a),alert("网络错误，无法提交")}};return b(()=>{const a=JSON.parse(localStorage.getItem("user"));a?(p.value=a.user_id,r.value=a.username,s.nickname=a.nickname||"",s.date=a.date||"",s.email=a.email||"",s.fullName=a.full_name||"",s.phone=a.phone||""):l.push("/login")}),(a,n)=>(S(),_("div",w,[e("div",{class:"header"},[e("span",{class:"back-arrow",onClick:c},"‹"),n[5]||(n[5]=e("div",{class:"header-title"},"My Account",-1))]),e("div",x,[e("div",N,[n[6]||(n[6]=e("span",{class:"username-label"},"Username:",-1)),e("span",U,g(r.value),1)]),e("div",I,[e("div",P,[n[7]||(n[7]=e("span",{class:"input-icon"},"👤",-1)),o(e("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>s.nickname=t),class:"input-field"},null,512),[[i,s.nickname]])])]),e("div",V,[e("div",B,[n[8]||(n[8]=e("span",{class:"input-icon"},"📅",-1)),o(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>s.birthday=t),type:"date",class:"input-field"},null,512),[[i,s.birthday]])])]),e("div",O,[e("div",A,[n[9]||(n[9]=e("span",{class:"input-icon"},"✉️",-1)),o(e("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>s.email=t),class:"input-field",placeholder:"Please enter your email"},null,512),[[i,s.email]])])]),e("div",C,[e("div",D,[n[10]||(n[10]=e("span",{class:"input-icon"},"👤",-1)),o(e("input",{"onUpdate:modelValue":n[3]||(n[3]=t=>s.nickname=t),class:"input-field",placeholder:"Please enter your Full Name"},null,512),[[i,s.nickname]])])]),n[12]||(n[12]=e("div",{class:"name-warning"},[e("div",{class:"warning-text"}," Please enter your correct name as it appears on your National Identity card. Do not use any wrong username, as it may cause problems for you. ")],-1)),e("div",J,[n[11]||(n[11]=e("span",{class:"phone-icon"},"📱",-1)),e("div",M,[o(e("input",{"onUpdate:modelValue":n[4]||(n[4]=t=>s.phone=t),type:"text",class:"phone-input",placeholder:d.value||"Enter your phone number"},null,8,T),[[i,s.phone]])])]),n[13]||(n[13]=e("div",{class:"privacy-section"},[e("div",{class:"privacy-title"},"We care about your privacy"),e("div",{class:"privacy-text"}," All the user data are encrypted to ensure your personal privacy is protected. ")],-1)),e("button",{class:"submit-button",onClick:m},"Submit")])]))}},j=y(E,[["__scopeId","data-v-9b9e5f89"]]);export{j as default};
