/* empty css              */import{_ as R,r as t,b as I,l as f,h as d,q as o,v as h,I as T,s as w,X as b,x as g,Y as U,u as N,p as y}from"./index-TXDMpLHT.js";import{_ as S}from"./login-logo-BFWnsWpl.js";const D={class:"login-page"},q={class:"input-group"},M=["disabled"],$={class:"input-group"},B={class:"input-group"},F=["type"],j={key:0,class:"error-message"},E={key:1,class:"success-message"},H=["disabled"],L={__name:"forget",setup(O){const _=N(),l=t(""),c=t(""),i=t(""),a=t(""),n=t(""),p=t(!1),v=t(!1),m=t(!1),C=I(()=>v.value?"text":"password"),P=()=>{v.value=!v.value},k=()=>{_.push("/")},V=async()=>{if(a.value="",n.value="",!l.value){a.value="Please enter your email first.";return}m.value=!0;try{const r=`email=${encodeURIComponent(l.value)}`,s=await(await fetch("https://192.168.0.122/silver/reset/request_reset.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r})).json();s.success?n.value=s.message||"Verification code sent.":a.value=s.message||"Failed to send code."}catch{a.value="Network error. Please try again."}finally{m.value=!1}},x=async()=>{if(a.value="",n.value="",!l.value||!c.value||!i.value){a.value="All fields are required.";return}if(i.value.length<6){a.value="Password must be at least 6 characters.";return}p.value=!0;try{const r=`email=${encodeURIComponent(l.value)}&code=${encodeURIComponent(c.value)}&new_password=${encodeURIComponent(i.value)}`,s=await(await fetch("https://192.168.0.122/silver/reset/reset_password.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r})).json();s.success?(n.value=s.message||"Password reset successful.",setTimeout(()=>{_.push("/login")},1500)):a.value=s.message||"Reset failed."}catch{a.value="Network error. Please try again."}finally{p.value=!1}};return(r,e)=>{const s=T;return y(),f("div",D,[d(s,{name:"arrow-left",class:"back-arrow",onClick:k}),e[3]||(e[3]=o("div",{class:"logo"},[o("img",{src:S,alt:"THVIP Logo",class:"logo-img"})],-1)),e[4]||(e[4]=o("h2",{class:"form-title"},"Forgot Password",-1)),e[5]||(e[5]=o("span",{class:"form-title2"},"Please retrieve your password in the following ways",-1)),o("div",q,[d(s,{name:"envelop-o",class:"input-icon"}),w(o("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>l.value=u),type:"email",placeholder:"Email",required:""},null,512),[[b,l.value]])]),o("button",{class:"send-code-button",onClick:V,disabled:m.value},g(m.value?"Sending...":"Send Code"),9,M),o("div",$,[d(s,{name:"certificate",class:"input-icon"}),w(o("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>c.value=u),type:"text",placeholder:"Verification Code"},null,512),[[b,c.value]])]),o("div",B,[d(s,{name:"lock",class:"input-icon"}),w(o("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>i.value=u),type:C.value,placeholder:"New Password (min 6 chars)"},null,8,F),[[U,i.value]]),d(s,{onClick:P,name:v.value?"eye-o":"closed-eye",class:"password-toggle"},null,8,["name"])]),a.value?(y(),f("div",j,g(a.value),1)):h("",!0),n.value?(y(),f("div",E,g(n.value),1)):h("",!0),o("button",{class:"login-button",onClick:x,disabled:p.value},g(p.value?"Resetting...":"Reset"),9,H)])}}},z=R(L,[["__scopeId","data-v-634dbfc9"]]);export{z as default};
